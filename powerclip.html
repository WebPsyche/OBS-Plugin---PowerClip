<!doctype html>
<html>
  <head>
    <title>PowerClip</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <script src="js/jquery.js"></script>
    <script src="js/jscolor.js"></script>
    <link rel="stylesheet" href="css/powerclip.css">
  </head>
  <body>
    <h1>PowerClip</h1>
    <!--mode container-->
    <div id="mode_container">
      <button class="mode_button mode_slide" onclick="setMode('slide')">Slide</button>
      <button class="mode_button mode_lw3" onclick="setMode('lw3')">Lower thirds</button>
    </div>
     <!--slide aside-->
     <div class="slide_aside">
      
    </div>
    <!--slide aside ends here-->
    <span class="add_slide" onclick="add_new_slide()">+</span>
      <!--slides-->
    <!--content panels-->
     <!--controls-->
      
 <!--slide content-->
        <div id="slide_section" class="slide_section">
            <!--slides-->
            <div class="control">
              <!--slder name-->
              <div id="slide_name_info">
                 <div class="slider_name_container">
                  <!--slide name input-->
                  </div>
                  <div class="live_video">
                   <img src="icons/camera-reels.svg">
                   <img src="icons/tv.svg">
                   </div>
              </div>
                   
               <!--headertext formatting-->
               <div class="header_text_formating">
                 <span class="icons">
                   <!--img icon-->
                   <img src="icons/text-left.svg" title="text-left" onclick="textAlign('header','left')">
                   <img src="icons/text-center.svg" title="text-center" onclick="textAlign('header','center')">
                   <img src="icons/text-right.svg" title="text-right" onclick="textAlign('header','right')">
                 </span>
                   <!--img icon for position-->
                   <span class="icons">
                     <img src="icons/caret-left.svg" title="positionX" onclick="position(this,'headerPositionX+')">
                     <input type="number" value="15" >
                     <img src="icons/caret-right.svg" title="positionX" onclick="position(this,'headerPositionX-')">
                   </span>
                      <span class="icons">
                        <img src="icons/caret-up (1).svg" title="positionY" onclick="position(this,'headerPositionY+')">
                        <input type="number" value="15">
                        <img src="icons/caret-down (3).svg" title="positionY" onclick="position(this,'headerPositionY-')">
                      </span>
                         <span class="icons">
                           <img src="icons/caret-up (1).svg" title="font-size" onclick="fontSize(this,'headerFont+')">
                           <input type="number" value="15" onchange="fontSize(value)">
                           <img src="icons/caret-down (3).svg" title="font-size" onclick="fontSize(this,'headerFont-')">
                         </span>
               </div>
               <div class="header_and_body_text_color">
                <span class="header_font_and_animation">
                    <img src="icons/fonts.svg"  onclick="openAnimationPanel()">
                    <img src="icons/fonts.svg" onclick="openFontPanel('header')">
                </span>
                 <input type="text" id="js_color" oninput="color(value,'header')" title="header text color" data-jscolor="{width:80, height:40, padding:5, borderRadius:5, borderWidth:0, controlBorderWidth:0, backgroundColor:'#1f1e1f', position:'bottom', shadow:true, previewSize:30}">
                 <input type="text" id="js_color" oninput="color(value,'headerBg')" title="header background-color" data-jscolor="{width:80, height:40, padding:5, borderRadius:5, borderWidth:0, controlBorderWidth:0, backgroundColor:'#1f1e1f', position:'bottom', shadow:true, previewSize:30}">
                 <input type="text" id="js_color" oninput="color(value,'bodyBg')" title="text background-color" data-jscolor="{width:80, height:40, padding:5, borderRadius:5, borderWidth:0, controlBorderWidth:0, backgroundColor:'#1f1e1f', position:'bottom', shadow:true, previewSize:30}">
                 <input type="text" id="js_color" oninput="color(value,'body')" style="float:right;" title="body text color" data-jscolor="{width:80, height:40, padding:5, borderRadius:5, borderWidth:0, controlBorderWidth:0, backgroundColor:'#1f1e1f', position:'bottom', shadow:true, previewSize:30}">
                 <span class="body_font_and_animation">
                    <img src="icons/fonts.svg" onclick="openFontPanel('body')">
                    <img src="icons/fonts.svg">    
                 </span>            
                </div>
                 <!--body text foromating-->
                    <div class="body_text_formating">
                     <span class="icons">
                       <!--img icon-->
                       <img src="icons/text-left.svg" title="text-left" onclick="textAlign('body','left')">
                       <img src="icons/text-center.svg" title="text-center" onclick="textAlign('body','center')">
                       <img src="icons/text-right.svg" title="text-right" onclick="textAlign('body','right')">
                     </span>
                       <!--img icon for position-->
                       <span class="icons">
                         <img src="icons/caret-left.svg" title="positionX" onclick="position(this,'bodyPositionX+')">
                         <input type="number" value="15">
                         <img src="icons/caret-right.svg" title="positionX" onclick="position(this,'bodyPositionX-')">
                       </span>
                          <span class="icons">
                            <img src="icons/caret-up (1).svg" title="positionY" onclick="position(this,'bodyPositionY+')">
                            <input type="number" value="15">
                            <img src="icons/caret-down (3).svg" title="positionY" onclick="position(this,'bodyPositionY-')">
                          </span>
                             <span class="icons">
                               <img src="icons/caret-up (1).svg" title="font-size" onclick="fontSize(this,'bodyFont+')">
                               <input type="number" value="15">
                               <img src="icons/caret-down (3).svg" title="font-size" onclick="fontSize(this,'bodyFont-')">
                             </span>
                    </div>
                    <!--font and animation container-->
                    <div class="font_and_animation">
                     
                        <!--fonts for header-->
                        <span class="fonts_header">
                         <option value="west">header</option>
                         <option value="west">header</option>
                         <option value="west">header</option>
                        </span>
                        <!--fonts for body-->
                        <span class="fonts_body">
                         <option value="west">body</option>
                         <option value="west">body</option>
                         <option value="west">body</option>
                        </span>
                    
                      <!--animations-->
                      <span class="animations">
                       <button>warm</button>
                       <button>warm</button>
                       <button>warm</button>
                       <button>warm</button>
                     </span>

                    </div>
                    <!--font and animation end here-->
                    
                     <!--momory panes-->
                     <div class="memory_panel">
                       <button onclick="memory('m1')">1</button>
                       <button>2</button>
                       <button>3</button>
                       <button>4</button>
                       <button>5</button>
                       <button>6</button>
                       <button>7</button>
                       <button>8</button>
                       <button>&</button>
                       <button>*</button>
                     </div>
                     </div>
           <!--slide control ends here-->
           <!--slide container-->
           <div class="slide_container">
            <!--slides-->
          

             <!--slide hard codes ends here-->
             </div>
             <!--slide container ends here-->
          
          </div>
          <!--slide section ends here-->

         
        <!--l3rd content-->
        <div id="lw3_section" class="lw3_section">
          Sorry This Page is still under development
          <button onclick="check()">button</button>
        </div>
       <!--lower third ends here-->

<!--inline script-->
<script>
  //power clip 1.0

  // slide information template emulator 
class slideEmulator{
    slide = {
      name : null,
      animation : null,
    }
    header = {
      text : null,
      color : null,
      font : null,
      size : null,
      align : null,
      positionX : null,
      positionY : null,
      backgroundColor : null,
    }
    body = {
      text : null,
      color : null,
      font : null,
      size : null,
      align : null,
      positionX : null,
      positionY : null,
      backgroundColor : null,
    }
  };

//set function for the mode buttons

function setMode(mode){
    for(let i=0; i<1; i++){
        document.querySelector('.slide_section').style.display = 'none'
        document.querySelector('.lw3_section').style.display = 'none'
        document.querySelector('.mode_slide').classList.remove('modeActive')
        document.querySelector('.mode_lw3').classList.remove('modeActive')
    }
    var currentMode = document.querySelector(`.${mode}_section`)
    currentMode.style.display = 'block'
    currentMode.classList.add('modeActive');
}
//close font panel by default
//open font panel
function openFontPanel(one){
    $(".fonts_"+one).toggle(200,"linear")
    $('.animations').hide(300,"linear")
   
}
//open animation panel
function openAnimationPanel(){
 $('.animations').toggle(200,"linear")
 $(".fonts_header").hide(300,"linear")
  }
  //current slide indicator
  var currentSlide ;
  //array of all slides
  let allSlides = []
// function for adding new slide
function add_new_slide(){
  var slideCounts = document.querySelectorAll('.slide_selector').length
  let newSlide = document.createElement("div");
  let headerInput = document.createElement("input")
  let textInput = document.createElement("textarea")
  headerInput.setAttribute('type','text');
  headerInput.setAttribute('placeholder','header');
  headerInput.setAttribute('onchange', "textInput(event,'header')")
  textInput.setAttribute('placeholder','body');
  textInput.setAttribute('onchange', "textInput(event,'body')")	
  newSlide.setAttribute('class','slides');
  newSlide.appendChild(headerInput);
  newSlide.appendChild(textInput);
  document.querySelector(".slide_container").appendChild(newSlide)

  let newSlideName = document.createElement("input")
  newSlideName.setAttribute('type','text')
  newSlideName.setAttribute('class','slide_name')
  newSlideName.setAttribute('placeholder',`slide  ${slideCounts + 1}`)
  document.querySelector(".slider_name_container").appendChild(newSlideName)

  //get slide counter and clone into it and append it to slide aside
  let newSlideSelector = document.createElement("button")
  newSlideSelector.setAttribute('class','slide_selector')
  newSlideSelector.setAttribute('onclick','select_slide(this)')
  newSlideSelector.textContent = slideCounts + 1;
  currentSlide = slideCounts + 1
  $(".slide_aside").append(newSlideSelector)
  $(".slide_aside :button").removeClass("slide_selector_active")
  $(".slide_aside :last-child").addClass("slide_selector_active")

  allSlides.push(new slideEmulator);
}
add_new_slide()
//use the slide selector to display each slides
function select_slide(num){
  let x = $(num).index()
  $(".slides").hide(200,"swing");
  $(".slide_name").hide()
  $(".slide_selector").removeClass("slide_selector_active")
  $(`.slide_container :nth-child(${x+1})`).show(100,"swing")
  $(`.slider_name_container :nth-child(${x+1})`).show()
  $(`.slide_aside :nth-child(${x+1})`).addClass("slide_selector_active")
  currentSlide = (x + 1);
  
  console.log(allSlides[x])
}


//text align function 
function textAlign(part,textAlign){
  let cslide = allSlides[currentSlide-1]
  if (part === "header"){
    document.querySelector(`.slide_container :nth-child(${currentSlide}) input`).style.textAlign = textAlign;
    cslide.header.align = textAlign;
  }else if (part === "body"){
    document.querySelector(`.slide_container :nth-child(${currentSlide}) textarea`).style.textAlign = textAlign;
    cslide.body.align = textAlign;
  }
}
// position function
function position (type,position){
  let cslide = allSlides[currentSlide-1];
  let types = type.parentNode.querySelector('input[type="number"]');
  if(position === 'headerPositionX+'){
    types.stepUp();
    cslide.header.positionX = types.value
  }else if(position === 'headerPositionX-'){
    types.stepDown();
    cslide.header.positionX = types.value
  }else if(position === 'headerPositionY+'){
    types.stepUp();
    cslide.header.positionY = types.value
  }else if(position === 'headerPositionY-'){
    types.stepDown();
    cslide.header.positionY = types.value
  }else if(position === 'bodyPositionX+'){
    types.stepUp();
    cslide.body.positionX = types.value
  }else if(position === 'bodyPositionX-'){
    types.stepDown();
    cslide.body.positionX = types.value
  }else if(position === 'bodyPositionY+'){
    types.stepUp();
    cslide.body.positionY = types.value
  }else if(position === 'bodyPositionY-'){
    types.stepDown();
    cslide.body.positionY = types.value
  }
}
//fontsize function
function fontSize(type,part){
  let cslide = allSlides[currentSlide-1];
  let types = type.parentNode.querySelector('input[type="number"]');
  if(part === 'headerFont+'){
    types.stepUp();
    cslide.header.size = types.value
  }else if(part === 'headerFont-'){
    types.stepDown();
    cslide.header.size = types.value
  }else if(part === 'bodyFont+'){
    types.stepUp();
    cslide.body.size = types.value
  }else if(part === 'bodyFont-'){
    types.stepDown();
    cslide.body.size = types.value
  }
}
// text input function
function textInput(part,textInput){
	let cslide = allSlides[currentSlide-1];
	let text = part.target.value;
	if (textInput === 'header'){
		cslide.header.text = text;
	}else if (textInput === 'body'){
		cslide.body.text = text;
	}
}

//function for color
function color(colorInput,part){
	let cslide = allSlides[currentSlide-1];
	let color  = colorInput;
	if (part === 'header'){
		cslide.header.color = color;
	}else if(part === 'headerBg'){
		cslide.header.backgroundColor = color;
	}else if (part === 'body'){
		cslide.body.color = color;
	}else if (part === 'bodyBg'){
		cslide.body.backgroundColor = color;
	}
	console.log(cslide);
}
//function for memory
function memory(memory){
	let cslide = allSlides[currentSlide-1];
	_headerInput = document.querySelector(`.slide_container :nth-child(${currentSlide}) input`);
	_bodyInput = document.querySelector(`.slide_container :nth-child(${currentSlide}) textarea`);
	slide = {header:null, body:null}
	var stringify = JSON.stringify(slide)
	var encrypted_setMemory = encrypt(stringify)
	var setLocalMemory  = localStorage.setItem(`${memory}[S${currentSlide}]`, encrypted_setMemory);
	var getLocalMemory = localStorage.getItem(`${memory}[S${currentSlide}]`);
	var decrypted_getLocalMemory = decrypt(getLocalMemory);
	var parse_getLocalMemory = JSON.parse(decrypted_getLocalMemory);
	
	function setLocalMemory (slide){
		 stringify = JSON.stringify(slide)
		 encrypted_setMemory = encrypt(stringify)
		 setLocalMemory  = localStorage.setItem(`${memory}[S${currentSlide}]`, encrypted_setMemory);
	}
	function getLocalMemory() {
		getLocalMemory = localStorage.getItem(`${memory}[S${currentSlide}]`);
		decrypted_getLocalMemory = decrypt(getLocalMemory);
		parse_getLocalMemory = JSON.parse(decrypted_getLocalMemory);
	}
	
	if (_headerInput.value === '' && _bodyInput.value === ''){
		//getLocalMemory()
		
		if(getLocalMemory || setLocalMemory){
			//getLocalMemory()
			_headerInput.value = parse_getLocalMemory.header;
			_bodyInput.value = parse_getLocalMemory.body;
		}else{
			window.alert('no text!');
			console.log('no text')
		}
	}else{
		//getLocalMemory()
		
			if(getLocalMemory || setLocalMemory){
				_headerInput.value = parse_getLocalMemory.header;
				_bodyInput.value = parse_getLocalMemory.body;
			}else{
				slide.header = _headerInput.value;
				slide.body = _bodyInput.value;
				setLocalMemory(slide);
			}
		}
	
	_headerInput = getLocalMemory
	console.log(parse_getLocalMemory)
}
//encrypt information
function encrypt (encrypt){
	return window.btoa(encrypt);
}
// decrypt information
function decrypt (decrypt){
	return window.atob(decrypt);
}
function check(){
  console.log(allSlides) 
}
</script>           

        <script src="js/powerclip.js"></script>
  <!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
  </html>